<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Pimp My Web Page: Simple to Complex</title>
        <link rel="stylesheet" href="http://img.netlumination.com/css/styles.0.1.0.css"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
    </head>
    <body>
        <div class="container">
            <header class="well">
                <h1 class="page-header">Pimp My Web Page: Simple to Complex</h1>
                
                <a class="badge badge-success text-white" href="/jquery-for-a-little-night-time-reading/">« JQuery for a...</a>&nbsp;&nbsp;
                
                <a class="badge badge-success text-white" href="/">Home</a>
                
                &nbsp;&nbsp;<a class="badge badge-success text-white" href="/a-few-code-snippets/">A few code... »</a>
                
            </header>
            <section>
                <p>Let&#39;s start with the simplest web page:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
</code></pre></div>
<p>Well, that&#39;s nice, but there&#39;s <a href="http://www.w3.org/TR/html401/struct/global.html">certain information missing</a>. 
We should add a doctype to let the browser know what flavor of HTML, XHTML, etc we&#39;re using. This declares the document 
type definition (DTD) in use for the document.</p>

<p>We should also add things like the HTML elements, a HEAD element for specifying more information about the page, a BODY 
for the contents.</p>

<p>We should also let the browser know our character encoding with a meta tag.</p>

<p>So now we have:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/\\xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Greetings World<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>What about the look of the page? Let&#39;s add some CSS:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/\\xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Greetings World<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
            <span class="nt">body</span> <span class="p">{</span>
                <span class="k">background-color</span><span class="o">:</span><span class="m">#BDC4D4</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>Of course we should throw that into an external style sheet:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="c">&lt;!-- sample.html --&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Greetings World<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;styles.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>and:</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="c">/* styles.css */</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span><span class="m">#BDC4D4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Let&#39;s add two images:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;p&gt;</span>
    An Image ==&gt;
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;images/one.png&quot;</span> <span class="na">alt=</span><span class="s">&quot;image 1&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>
    Another Image ==&gt;
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;images/two.png&quot;</span> <span class="na">alt=</span><span class="s">&quot;image 2&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div>
<p>Hmmm... but we&#39;re making two requests to the server for these two images. We can pass the same amount of information to 
the user with only one request to the server using 
<a href="http://www.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/">sprites</a>.</p>

<p>Sprites are often used in divs or other elements as background images. We&#39;ll use sprites as background images, but 
they&#39;ll be the background to an IMG element. &quot;null.png&quot; is simply a transparent pixel:</p>

<p>The HTML:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="c">&lt;!-- sample.html --&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Greetings World<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;styles.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            An Image ==&gt;
            <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;images/null.png&quot;</span> <span class="na">class=</span><span class="s">&quot;sprite image1&quot;</span> <span class="na">alt=</span><span class="s">&quot;image 1&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            Another Image ==&gt;
            <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;images/null.png&quot;</span> <span class="na">class=</span><span class="s">&quot;sprite image2&quot;</span> <span class="na">alt=</span><span class="s">&quot;image 2&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>The CSS:</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="c">/* styles.css */</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span><span class="m">#BDC4D4</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.sprite</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span><span class="m">80px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span><span class="m">80px</span><span class="p">;</span>
    <span class="k">background</span><span class="o">:</span><span class="sx">url(&#39;images/sprite.png&#39;)</span>
<span class="p">}</span>
<span class="nc">.image2</span> <span class="p">{</span>
    <span class="k">background-position</span><span class="o">:-</span><span class="m">80px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Well, ok, but our sight isn&#39;t going to change much over time, so once a visitor see our site, they should cache it in 
their browser for future use. This&#39;ll make the page load faster for everyone, since it reduces server load, and it 
speeds up the loading of pages by repeat visitors.</p>

<p>We can accomplich this using HTTP headers. This is not the HTML HEADER tag. HTTP headers are lines that the server 
sends to the browser before the contents of the page... this means we can&#39;t put the HTTP headers into the HTML file. 
We&#39;ll have to use something server side for this. PHP has a header() function, which makes things really easy:</p>
<div class="highlight"><pre><code class="php language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// Expires one year from now</span>
<span class="nv">$expires</span> <span class="o">=</span> <span class="nb">mktime</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">),</span>   <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">),</span>   <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="c1">// Format date</span>
<span class="nv">$date</span> <span class="o">=</span>  <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;D, d M Y H:i:s&#39;</span><span class="p">,</span> <span class="nv">$expires</span><span class="p">);</span>
<span class="c1">// Send HTTP header</span>
<span class="nx">header</span><span class="p">(</span><span class="s2">&quot;Expires: </span><span class="si">$date</span><span class="s2"> GMT&quot;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="x">&lt;!-- sample.html --&gt;</span>
<span class="x">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<span class="x">    &lt;head&gt;</span>
<span class="x">        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=utf-8&quot; /&gt;</span>
<span class="x">        &lt;title&gt;Greetings World&lt;/title&gt;</span>
<span class="x">        &lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;</span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;h1&gt;Hello World!&lt;/h1&gt;</span>
<span class="x">        &lt;p&gt;</span>
<span class="x">            An Image ==&gt;</span>
<span class="x">            &lt;img src=&quot;images/null.png&quot; class=&quot;sprite image1&quot; alt=&quot;image 1&quot; /&gt;</span>
<span class="x">        &lt;/p&gt;</span>
<span class="x">        &lt;p&gt;</span>
<span class="x">            Another Image ==&gt;</span>
<span class="x">            &lt;img src=&quot;images/null.png&quot; class=&quot;sprite image2&quot; alt=&quot;image 2&quot; /&gt;</span>
<span class="x">        &lt;/p&gt;</span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</code></pre></div>
<p>We could have done the above with Apache or whatever server itself we&#39;re using. PHP is nice for illustration, since we 
can keep all the code in the HTML file. Since the HTTP header comes before the HTML content, you cannot put any HTML 
before the PHP header() function.</p>

<p>Ok, now we&#39;re getting somewhere, but we&#39;ve still got all this text and stuff on our web page.... ok we don&#39;t, but we 
could have all this stuff, if we had a big web page, or it may look like a lot of stuff to someone with a limping dial 
up in East Timor. Well, why don&#39;t we compress all our stuff. Let&#39;s GZIP it.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="cp">&lt;?php</span>
<span class="cp">// Expires one year from now</span>
<span class="cp">$expires = mktime(0, 0, 0, date(&quot;m&quot;),   date(&quot;d&quot;),   date(&quot;Y&quot;)+1);</span>
<span class="cp">// Format date</span>
<span class="cp">$date =  date(&#39;D, d M Y H:i:s&#39;, $expires);</span>
<span class="cp">// Send HTTP header</span>
<span class="cp">header(&quot;Expires: $date GMT&quot;);</span>
<span class="cp">if (substr_count($_SERVER[&#39;HTTP_ACCEPT_ENCODING&#39;], &#39;gzip&#39;))</span>
<span class="cp">    ob_start(&quot;ob_gzhandler&quot;);</span>
<span class="cp">else</span>
<span class="cp">    ob_start();</span>
<span class="cp">?&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="c">&lt;!-- sample.html --&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Greetings World<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;styles.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            An Image ==&gt;
            <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;images/null.png&quot;</span> <span class="na">class=</span><span class="s">&quot;sprite image1&quot;</span> <span class="na">alt=</span><span class="s">&quot;image 1&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            Another Image ==&gt;
            <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;images/null.png&quot;</span> <span class="na">class=</span><span class="s">&quot;sprite image2&quot;</span> <span class="na">alt=</span><span class="s">&quot;image 2&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>You can <a href="http://www.gidnetwork.com/tools/gzip-test.php">confirm that you&#39;re properly GZIPPED</a>.</p>

<p>Ok. With PHP we can also <a href="http://php.net/manual/en/function.flush.php">flush</a> the buffer early:</p>
<div class="highlight"><pre><code class="php language-php" data-lang="php"><span class="x">&lt;/head&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="nb">flush</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;body&gt;</span>
</code></pre></div>
<p>It&#39;s great that our CSS is in its own file, but it still has a bunch of whitespace. Why don&#39;t we minify it.</p>

<p>I used the <a href="http://developer.yahoo.com/yui/compressor/">YUI compressor</a> with this command:</p>
<div class="highlight"><pre><code class="bash language-bash" data-lang="bash">java -jar yuicompressor-2.4.2.jar styles.css -o styles.min.css --type css
</code></pre></div>
<p>To get this CSS file:</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nt">body</span><span class="p">{</span><span class="k">background-color</span><span class="o">:</span><span class="m">#BDC4D4</span><span class="p">;}</span><span class="nc">.sprite</span><span class="p">{</span><span class="k">width</span><span class="o">:</span><span class="m">80px</span><span class="p">;</span><span class="k">height</span><span class="o">:</span><span class="m">80px</span><span class="p">;</span><span class="k">background</span><span class="o">:</span><span class="sx">url(&#39;images/sprite.png&#39;)</span><span class="p">;}</span><span class="nc">.image2</span><span class="p">{</span><span class="k">background-position</span><span class="o">:-</span><span class="m">80px</span><span class="p">;}</span>
</code></pre></div>
<p>We can do the same minification with our Javascript if we have any, and remember to include your Javascript as far to 
the bottom of the page as you can.</p>

<p>Take a look at the <a href="http://peter-ajtai.com/examples/html/sample.php">final page</a>.</p>

            </section>
            <footer>
                
                <p class="tags">
    
    <a href="/tags.html#optimization" class="badge badge-inverse">optimization</a>&nbsp;
    
    <a href="/tags.html#Website Advice" class="badge badge-inverse">Website Advice</a>&nbsp;
    
</p>
                
                <p class="well">To comment <a href="http://twitter.com/home?status=@Peter_Ajtai">tweet @Peter_Ajtai</a> or <a href="https://github.com/pajtai/Netlumination.com/issues">submit an issue on GitHub.</p>
                
                <div class="pull-right">
                    <h3 class="logo"><a href="/">Netlumination</a></h3>
                    
                    <h4 class="pull-right">21 Jun 2010</h4>
                    
                </div>
            </footer>
        </div>
    </body>
</html>