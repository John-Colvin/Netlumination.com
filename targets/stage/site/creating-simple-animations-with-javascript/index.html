<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Creating Simple Animations With Javascript</title>
        <link rel="stylesheet" href="/css/styles.concat.min.css"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
    </head>
    <body>
        <div class="container">
            <header class="well">
                <h1 class="page-header">Creating Simple Animations With Javascript</h1>
                
                <a class="badge badge-success text-white" href="/initial-preferences-for-photoshop/">« Initial preferences for...</a>&nbsp;&nbsp;
                
                <a class="badge badge-success text-white" href="/">Home</a>
                
                &nbsp;&nbsp;<a class="badge badge-success text-white" href="/i-hope-your-inheritance-isnt-an-em/">I Hope Your... »</a>
                
            </header>
            <section>
                <p>This is a basic JavaScript tutorial. I will describe how to move an element around the page using a simple animation
script. The element you move around the page can be anything from an image to a paragraph.</p>

<p>Below is a working example:</p>

<script type="text/javascript">
    var distanceBall=0;
    var directionBall=1;
    var timerToggle=null;

    function animateBall() {
        document.getElementById("basketball").style.top=distanceBall + "px";
        distanceBall+=directionBall;
        if (distanceBall>200) { directionBall=-1; }
        if (0>distanceBall) { directionBall=1; }
        timerToggle=setTimeout(function() { animateBall(); },10);
    }
    function checkButton() {
      if (document.getElementById("ballButton").value=="Animate Basketball") {
        document.getElementById("ballButton").value="Stop Basketball";
        animateBall();
      } else {
        document.getElementById("ballButton").value="Animate Basketball";
        clearTimeout(timerToggle);
      }
    }
</script>

<p><form>
    <input id="ballButton" onclick="checkButton()" type="button" value="Animate Basketball" />
</form>
<div id="basketball" style="position: relative;">
    <img src="http://img.netlumination.com/Basketball_64x64-1.png" alt="Basketball" />
</div></p>

<hr>

<ol>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Starting">Starting and stopping the animation using checkButton()</a></li>
<li><a href="#Moving">Moving the ball image using animateBall()</a></li>
<li><a href="#References">References</a></li>
<li><a href="#Conclusion">Conclusion</a></li>
</ol>

<h2><a id="Introduction">Introduction</a></h2>

<p>Here is the code that makes the ball move. For the rest of this post, I&#39;ll go over the basic ideas required to put the
code together and how the specific code works:</p>
<div class="highlight"><pre><code class="javascript"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">distanceBall</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">directionBall</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">timerToggle</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">animateBall</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;basketball&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">distanceBall</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">distanceBall</span> <span class="o">+=</span> <span class="nx">directionBall</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">distanceBall</span><span class="o">&gt;</span><span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">directionBall</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">distanceBall</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">directionBall</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
         <span class="p">}</span>
        <span class="nx">timerToggle</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">animateBall</span><span class="p">();</span>
        <span class="p">},</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">checkButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ballButton&quot;</span><span class="p">).</span><span class="nx">value</span><span class="o">==</span><span class="s2">&quot;Animate Basketball&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ballButton&quot;</span><span class="p">).</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Stop Basketball&quot;</span><span class="p">;</span>
            <span class="nx">animateBall</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ballButton&quot;</span><span class="p">).</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Animate Basketball&quot;</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timerToggle</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;ballButton&quot;</span> <span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;checkButton()&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Animate Basketball&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;basketball&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&quot;position: relative;&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://img.netlumination.com/Basketball_64x64-1.png&quot;</span> <span class="nx">alt</span><span class="o">=</span><span class="s2">&quot;Basketball&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
<h4><a href="http://jsfiddle.net/pajtai/QmGyf/">Here&#39;s a jsFiddle for you to play with</a></h4>

<p>There are two functions in this script, <code>animateBall()</code> and <code>checkButton()</code>. <code>animateBall()</code> is what makes the
basketball image move. <code>checkButton()</code> starts and stops the ball. Let&#39;s start by going over <code>checkButton()</code>, since that
is the function that is called if the viewer presses the &quot;Animate Basketball&quot; button.</p>

<h2><a id="Starting">Starting and stopping the animation using <code>checkButton()</code></a></h2>

<p>Whenever you create an animation, or any sort of constantly running JavaScript, it&#39;s considerate to allow the viewer to
stop the script somehow. This is done using the checkButton function. The checkButton function also starts the script
running, so it serves a dual purpose.</p>
<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">checkButton</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ballButton&quot;</span><span class="p">).</span><span class="nx">value</span> <span class="o">==</span> <span class="s2">&quot;Animate Basketball&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ballButton&quot;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;Stop Basketball&quot;</span><span class="p">;</span>
        <span class="nx">animateBall</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ballButton&quot;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;Animate Basketball&quot;</span><span class="p">;</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timerToggle</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The checkButton function checks what the input button says and does  one of two things based upon what the button reads.
Looking at the HTML of the <code>INPUT</code> button, you can see that the <code>INPUT</code> button has the <code>id</code> of &quot;ballButton.&quot; So, we can
use <code>document.getElementById(&quot;ballButton&quot;)</code>.value to access the words on the button. Accessing  HTML elements, their
attributes, and inline CSS styles on a web page with Javascript can be done using the Document Object Model (DOM).
<a href="http://www.javascriptkit.com/domref/">Here</a> and <a href="http://www.w3schools.com/jsref/default.asp">here</a> are two easy to use
references for the DOM.</p>

<p><code>checkButton()</code> first replaces the words in the button. If the button reads, &quot;Animate Basketball&quot; it writes in
&quot;Stop Basketball&quot; instead. We know the button can only read one of two things, so we use the
<a href="http://www.w3schools.com/js/js_if_else.asp">ELSE statement</a> to set the INPUT BUTTON to &quot;Animate Basketball&quot;
if it doesn&#39;t already say that. So one of the things the IF, ELSE statement does is toggle the INPUT BUTTON between
&quot;Animate Basketball&quot; and &quot;Stop Basketball&quot;</p>

<p>There is a second line after the writing on the button is changed. If the button read &quot;Animate Basketball&quot; then the
function animateBall is called. This gets the ball moving.</p>

<p>If the button read &quot;Stop Basketball,&quot; the ELSE statement, then the ball is stopped using clearTimeout. I&#39;ll go over how
<code>clearTimeout</code> works later. For now it&#39;s just important to understand that checkButton simply functions as a toggle that
does two things whenever it&#39;s called. First, it changes the writing on the INPUT button. Second, it either starts or
stops the basketball image moving.</p>

<p>Let&#39;s look at how the basketball image is moved when checkButton() calls the animateBall function.</p>

<h2><a is="Moving">Moving the ball image using animateBall()</a></h2>

<p>This is the heart of the animation, and what&#39;s startling is how few lines it takes to animate something with JavaScript.</p>

<p>Essentially what we want to do is move the DIV containing the basketball image small steps at a time. This requires two
things: physical movement of the DIV and a time increment in which this movement will be done.</p>
<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">distanceBall</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">directionBall</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">timerToggle</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">animateBall</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;basketball&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">distanceBall</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
    <span class="nx">distanceBall</span><span class="o">+=</span><span class="nx">directionBall</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">distanceBall</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">directionBall</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">0</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="nx">distanceBall</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">directionBall</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">timerToggle</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">animateBall</span><span class="p">();</span>
    <span class="p">},</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>If you look at the HTML, you&#39;ll see that the basketball image is in a div with the ID &quot;basketball&quot; and the it&#39;s CSS
style of postion is set to RELATIVE. It&#39;s important to set the position to RELATIVE, since that means that we can use
the TOP or LEFT CSS styles to change the position of the DIV relative to where you see it when the image loads.</p>
<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;basketball&quot;</span> <span class="na">style=</span><span class="s">&quot;position: relative;&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;http://img.netlumination.com/Basketball_64x64-1.png&quot;</span> <span class="na">alt=</span><span class="s">&quot;Basketball&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>There are three variables that the animateBall function uses. The first is distanceBall. distanceBall is how many pixels
the TOP CSS property of the DIV with the basketball image in it is set to. So distanceBall will control where the image
is displayed. directionBall will control whether the image is moving up or down. We need this so that the image doesn&#39;t
wander too far away. Finally the timerToggle variable will allow us to stop the ball from moving. This is done as a
courtesy to the viewer.</p>

<p>The first line of the animateBall function adds directionBall to distanceBall. Initially directionBall is 1, so this
simply adds 1 to distanceBall.</p>

<p>Next we display the DIV containing the basketball image at this new location. We use the HTML DOM objects to reference
the DIV. We know the DIV has an ID of &quot;basketball&quot;. This makes it easy to pick out from all the other elements on the
page by writing document.getElementById(&quot;basketball&quot;). Now to specifically target the CSS TOP style we&#39;ll use
<code>document.getElementById(&quot;basketball&quot;).style.top</code>. The top property can be read from the browser or it can be written
to. In other words we can change it. It&#39;s almost as simple as setting it equal to distanceBall. The only trick part is
that TOP has units. We&#39;ll use pixels, so me must concatenate &quot;px&quot; to the end of the number. We do this using the
<code>+</code> <a href="http://jennifermadden.com/javascript/concatenation.html">concatenation operator</a>.</p>

<p>So with just two lines of code we&#39;ve moved the DIV one pixel. The next two lines, the two if statements, check if the
DIV is at a TOP greater than 200 or less than 0. If it is, it reverses the direction of movement, so that the ball ends
up bouncing up and down 200 pixels. Here is an alternative way to write those two lines as one line (to understand the
codes look at this page on <a href="http://www.w3schools.com/JS/js_comparisons.asp">JavaScript comparison and logical operators</a>
):</p>
<div class="highlight"><pre><code class="javascript"><span class="k">if</span> <span class="p">(</span><span class="nx">distanceBall</span> <span class="o">&gt;</span> <span class="mi">200</span> <span class="o">||</span> <span class="nx">distanceBall</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">directionBall</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Anyway, this all looks great so far, but we&#39;ve only moved the ball one pixel. We have to repeat this movement every few
moments. This would be very easy if there was a function to pause a JavaScript program, but there isn&#39;t, and trying to
make a custom function to do this can end up with very messy results. There is, however, a way to tell JavaScript to do
an action in a set amount of time. It&#39;s like setting an alarm clock. It&#39;s called setTimeout() and here is how it works:</p>
<div class="highlight"><pre><code class="javascript"><span class="nx">setTimeout</span><span class="p">(</span> <span class="p">[</span><span class="nx">What</span> <span class="nx">to</span> <span class="k">do</span><span class="p">]</span> <span class="p">,</span> <span class="p">[</span><span class="nx">How</span> <span class="kr">long</span> <span class="nx">to</span> <span class="nx">wait</span><span class="p">]</span> <span class="p">);</span>
</code></pre></div>
<p>It&#39;s important to realize that when you use <code>setTimeout()</code>, Javascript will keep evaluating the lines below <code>setTimeout</code>
 immediately. It does not pause. It&#39;s like setting an alarm and keeping right on going, now with the alarm timer ticking
 in the background.</p>

<p>The way to use setTimeout in our animation function is to use it as the last line, and have it call our animation
function itself. Like this:</p>
<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">animateBall</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">[</span> <span class="nx">move</span> <span class="nx">ball</span> <span class="nx">one</span> <span class="nx">increment</span> <span class="nx">and</span> <span class="nx">show</span> <span class="nx">it</span> <span class="nx">at</span> <span class="nx">its</span> <span class="k">new</span> <span class="nx">location</span> <span class="p">]</span>
    <span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">animateBall</span><span class="p">();</span> <span class="p">}</span> <span class="p">,</span> <span class="mi">10</span> <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>This will perform the animateBall() function once every 10 milliseconds, since setTimeout measures time in milliseconds.
It&#39;s important that animateBall is not a for, while, or do loop, since setTimeout does not pause the execution of the
script. Also, note the use of the anonymous - <code>function ( function () { ... } )</code> in <code>setTimeout</code>. This is better than
putting <code>animateBall()</code> in quotes and using <code>eval()</code>.</p>

<p>Now that we have the ball going, how can we make it stop? The way to stop the animation and the ball is to somehow get
<code>setTimeout()</code> to stop firing.</p>

<p>You&#39;ll notice that the variable <code>timerToggle</code> is set equal to <code>setTimeout()</code> in the <code>animateBall</code> funciton. This may
look confusing, since it&#39;s not immediately apparent what sort of variable <code>timerToggle</code> is. Well, timerToggle simply
allows us to keep track of the specific timer we used for the animation, so that we can stop it by using
<code>clearTimeout()</code>.</p>

<p>To stop a timer we&#39;ll use <code>clearTimeout()</code>. The only thing we have to do is tell the browser which timer we want to
stop. Luckily this is what the timerToggle variable is for, so clearTimeout(timerToggle) will stop the ball from moving.</p>

<p><code>clearTimeout()</code> is not in the <code>animateBall</code> function, it is in the <code>checkButton</code> function. This is because
<code>clearTimeout</code> is called if the viewer presses the button while the ball is moving.</p>

<h2><a id="Conclusion">Conclusion</a></h2>

<p>Ok, so that&#39;s it. You can animate a DIV on your page using one simple function, and you can stop and start the animation
using a second function.</p>

<p>Remember that we are moving the DIV with the image inside. This means we could also put other things in the DIV like a
paragraph, form, list, etc.</p>

<p>You should always consider the pros and cons of using animations on your page. As anyone who has sat through a few Power
Point presentation knows, it is easy to go overboard with animations (and sound effects, but that&#39;s another matter).</p>

<p>However, if you can link the animation to the content of your page, it may be well worth using it. For example, if you
have a site about food, you could style the logo of your page to slide onto the page like a platter of food being
served. Again, this can be done elegantly or it can be easily overdone. Additionally animation and interactivity (like
the ability to start and stop the animation) is the seed of video games and interactive art.</p>

<p>Finally, you should consider how this simple function can be improved. You might have noticed that I used global
variables. This limits the names of other variables that can be used on the same page, which can be especially
problematic or confusing in large projects. So, removing the global variables would be ideal. This leads me to a second
possible change. Instead of using an inline call to a javascript function in an HTML DIV, I could create an event
handler for that DIV. This would allow me to get rid of the global variables too.</p>

<p>Exactly how to do that might be the subject for a later post.</p>

<h2><a id="References">References</a></h2>

<ul>
<li><a href="http://www.chipchapin.com/WebTools/JavaScript/exampleA01.html">Tutorial on JavaScript animation</a></li>
<li><a href="http://www.w3schools.com/jS/js_operators.asp">Javascript operators</a></li>
<li><a href="http://www.java2s.com/Code/JavaScriptReference/Javascript-Methods/CatalogJavascript-Methods.htm">Javascript methods</a></li>
<li><a href="http://www.javascriptkit.com/domref/index.shtml">Javascript DOM reference</a></li>
<li><a href="http://www.w3schools.com/jsref/default.asp">Javascript DOM reference</a></li>
<li><a href="http://www.iconspedia.com/icon/basketball-ball-438-.html">Basketball Image</a></li>
</ul>

            </section>
            <footer>
                
                <p class="tags">
    
    <a href="/tags.html#animation" class="badge badge-inverse">animation</a>&nbsp;
    
    <a href="/tags.html#CSS" class="badge badge-inverse">CSS</a>&nbsp;
    
    <a href="/tags.html#functions" class="badge badge-inverse">functions</a>&nbsp;
    
    <a href="/tags.html#HTML" class="badge badge-inverse">HTML</a>&nbsp;
    
    <a href="/tags.html#Javascript" class="badge badge-inverse">Javascript</a>&nbsp;
    
    <a href="/tags.html#loop" class="badge badge-inverse">loop</a>&nbsp;
    
    <a href="/tags.html#programming" class="badge badge-inverse">programming</a>&nbsp;
    
    <a href="/tags.html#timer" class="badge badge-inverse">timer</a>&nbsp;
    
</p>
                <div class="pull-right">
                    <h3 class="logo"><a href="/">Netlumination</a></h3>
                    <h4 class="pull-right">15 Oct 2009</h4>
                </div>
            </footer>
        </div>
    </body>
</html>